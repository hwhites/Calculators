---
// src/pages/sales-tax-calculator.astro
import Layout from '../../layouts/Layout.astro';
---

<Layout title="Sales Tax Calculator | CourseAssist">
  <div class="max-w-md mx-auto">
    <!-- Page Header -->
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold text-gray-800">Sales Tax Calculator</h1>
      <p class="mt-2 text-lg text-gray-600">Quickly calculate sales tax and the final price.</p>
    </div>

    <!-- Calculator Card -->
    <div class="bg-white p-8 rounded-xl border border-gray-200 shadow-md">
      
      <!-- Price Input -->
      <div>
        <label for="preTaxPrice" class="block text-sm font-medium text-gray-700">Price Before Tax ($)</label>
        <input type="number" id="preTaxPrice" class="calc-input mt-1 w-full p-3 border border-gray-300 rounded-lg text-2xl" placeholder="e.g., 49.99">
      </div>

      <!-- Tax Rate Input -->
      <div class="mt-4">
        <label for="taxRate" class="block text-sm font-medium text-gray-700">Sales Tax Rate (%)</label>
        <input type="number" id="taxRate" class="calc-input mt-1 w-full p-3 border border-gray-300 rounded-lg" placeholder="e.g., 8.25">
      </div>

      <!-- Results Display -->
      <div class="mt-8 border-t border-gray-200 pt-6 space-y-4">
        <div class="flex justify-between items-center text-lg">
          <p class="text-gray-600">Sales Tax:</p>
          <p id="salesTaxAmount" class="font-bold text-gray-800">$0.00</p>
        </div>
        <div class="flex justify-between items-center text-2xl">
          <p class="font-bold text-gray-800">Total Price:</p>
          <p id="totalPrice" class="font-extrabold text-blue-600">$0.00</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- DOM Elements ---
    const preTaxPriceInput = document.getElementById('preTaxPrice');
    const taxRateInput = document.getElementById('taxRate');
    const salesTaxAmountDisplay = document.getElementById('salesTaxAmount');
    const totalPriceDisplay = document.getElementById('totalPrice');

    const allInputs = [preTaxPriceInput, taxRateInput];

    // --- Calculation Logic ---
    function calculateTax() {
      const price = parseFloat(preTaxPriceInput.value) || 0;
      const rate = parseFloat(taxRateInput.value) || 0;

      if (price <= 0 || rate < 0) {
        salesTaxAmountDisplay.textContent = '$0.00';
        totalPriceDisplay.textContent = '$0.00';
        return;
      }

      const taxAmount = price * (rate / 100);
      const finalPrice = price + taxAmount;

      salesTaxAmountDisplay.textContent = `$${taxAmount.toFixed(2)}`;
      totalPriceDisplay.textContent = `$${finalPrice.toFixed(2)}`;
    }

    // --- Event Listeners ---
    allInputs.forEach(input => {
      input.addEventListener('input', calculateTax);
    });

  </script>
</Layout>
